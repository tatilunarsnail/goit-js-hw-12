{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44884421-e01d7eda68b827a4ca86e08d6';\nconst BASE_URL = 'https://pixabay.com/api/';\nlet currentPage = 1;\nlet currentQuery = '';\n\nexport async function fetchImages(query) {\n    if (currentQuery !== query) {\n        currentPage = 1;\n        currentQuery = query;\n    }\n\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: currentPage,\n                per_page: 15,\n            },\n        });\n\n        currentPage += 1;\n\n        return response.data;\n    } catch (error) {\n        throw new Error(error.response.status);\n    }\n}\n","export function renderImages(array) {\n    return array\n    .map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) =>\n         `<li class=\"gallery-item\">\n              <a class=\"gallery-link\" href=\"${largeImageURL}\">\n              <img\n              class=\"gallery-image\"\n              src=\"${webformatURL}\"\n              data-source=\"${largeImageURL}\"\n              alt=\"${tags}\"\n              width=\"360px\"\n              height=\"152px\"\n              />\n              </a>\n              <div class=\"info-box\">\n                  <p>Like: <span>${likes}</span></p>\n                  <p>Views: <span>${views}</span></p>\n                  <p>Comments: <span>${comments}</span></p>\n                  <p>Downloads: <span>${downloads}</span></p>\n              </div>\n        </li>`\n      )\n    .join(\"\");\n  }\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { fetchImages } from \"./js/pixabay-api\";\nimport { renderImages } from \"./js/render-functions\";\n\nconst form = document.querySelector(\".form\");\nconst galleryList = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst fetchImagesBtn = document.querySelector(\".fetch-more-btn\");\n\nlet searchValue = '';\nlet totalHits = 0;\nlet loadedHits = 0;\n\nfetchImagesBtn.style.display = \"none\";\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    searchValue = event.target.elements.query.value.trim();\n    if (searchValue === \"\") {\n        iziToast.error({\n            title: '',\n            icon: '',\n            message: 'Please enter something to search images!',\n            position: 'topCenter',\n            backgroundColor: \"#ef4040\",\n            titleColor: \"#fff\",\n            messageColor: \"#fff\"\n        });\n        return;\n    }\n    loader.style.display = \"inline-block\";\n    fetchImagesBtn.style.display = \"none\";\n    totalHits = 0;\n    loadedHits = 0;\n    try {\n        const images = await fetchImages(searchValue);\n        totalHits = images.totalHits;\n        loadedHits = images.hits.length;\n        galleryList.innerHTML = \"\";\n        if (images.hits.length === 0) {\n            iziToast.error({\n                title: '',\n                icon: '',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topCenter',\n                backgroundColor: \"#ef4040\",\n                titleColor: \"#fff\",\n                messageColor: \"#fff\"\n            });\n        } else {\n            galleryList.insertAdjacentHTML(\"beforeend\", renderImages(images.hits));\n            const links = document.querySelectorAll(\".gallery-link\");\n            links.forEach(link => link.addEventListener(\"click\", event => event.preventDefault()));\n            const lightbox = new SimpleLightbox('.gallery a', {\n                captionsData: \"alt\",\n                captionPosition: \"bottom\",\n                captionDelay: 250\n            });\n            lightbox.refresh();\n            if (loadedHits < totalHits) {\n                fetchImagesBtn.style.display = \"block\";\n            }\n        }\n    } catch (error) {\n        iziToast.error({\n            title: '',\n            icon: '',\n            message: `${error}`,\n            position: 'topCenter',\n            backgroundColor: \"#ef4040\",\n            titleColor: \"#fff\",\n            messageColor: \"#fff\"\n        });\n    } finally {\n        loader.style.display = \"none\";\n    }\n});\n\nfetchImagesBtn.addEventListener(\"click\", async () => {\n    loader.style.display = \"inline-block\";\n    try {\n        const images = await fetchImages(searchValue);\n        loadedHits += images.hits.length;\n        if (loadedHits >= totalHits) {\n            fetchImagesBtn.style.display = \"none\";\n            iziToast.info({\n                title: '',\n                icon: '',\n                message: \"We're sorry, but you have reached the end of search results.\",\n                position: 'topCenter',\n                backgroundColor: \"#ef4040\",\n                titleColor: \"#fff\",\n                messageColor: \"#fff\"\n            });\n        } else {\n            galleryList.insertAdjacentHTML(\"beforeend\", renderImages(images.hits));\n            const links = document.querySelectorAll(\".gallery-link\");\n            links.forEach(link => link.addEventListener(\"click\", event => event.preventDefault()));\n            const lightbox = new SimpleLightbox('.gallery a', {\n                captionsData: \"alt\",\n                captionPosition: \"bottom\",\n                captionDelay: 250\n            });\n            lightbox.refresh();\n\n            const { height: cardHeight } = document.querySelector('.gallery-item').getBoundingClientRect();\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: 'smooth'\n            });\n        }\n    } catch (error) {\n        iziToast.error({\n            title: '',\n            icon: '',\n            message: `${error}`,\n            position: 'topCenter',\n            backgroundColor: \"#ef4040\",\n            titleColor: \"#fff\",\n            messageColor: \"#fff\"\n        });\n    } finally {\n        loader.style.display = \"none\";\n    }\n});\n"],"names":["API_KEY","BASE_URL","currentPage","currentQuery","fetchImages","query","response","axios","error","renderImages","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","galleryList","loader","fetchImagesBtn","searchValue","totalHits","loadedHits","event","iziToast","images","link","SimpleLightbox","cardHeight"],"mappings":"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"}